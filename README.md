## Real-Time Sensor Monitoring System

### Overview

This project simulates a real-time environmental monitoring system using data streams from IoT sensors placed in different rooms of a smart
home. The system uses **Apache Kafka** as a streaming platform, **Faust (Python)** as the stream processing engine, and **Docker** to run
the Kafka and Zookeeper services. The goal is to monitor various environmental parameters such as temperature, light, sound, CO2 levels, and
occupancy in real time. Sensor data is read from a CSV file and sent to Kafka topics, while Faust processes the data in real time and
triggers alerts or logs computed metrics.

---

### Technologies Used

* **Faust** – Python-based stream processing library built for Kafka.
* **Kafka + Zookeeper** – Distributed event streaming platform (via Docker Compose).
* **kafka-python** – Kafka producer for sending simulated sensor data.
* **pandas** – For reading structured sensor data from a CSV file.
* **Docker** – Used to run Kafka and Zookeeper services.

---

### Sensor Data Sources

The input dataset `sensor_data.csv` includes real-world-like measurements from multiple sensors:

* **S1, S2, S3, S4** represent sensor groups assigned to rooms:

    * `S1` → Living Room
    * `S2` → Bedroom
    * `S3` → Kitchen
    * `S4` → Office

Each sensor group provides:

* Temperature (`Sx_Temp`)
* Light level (`Sx_Light`)
* Sound level (`Sx_Sound`)

In addition, the CSV file includes:

* CO2 level (`S5_CO2`)
* Motion detection (`S6_PIR`, `S7_PIR`)
* Occupancy count (`Room_Occupancy_Count`)

---

### Kafka Topics

| Topic Name             | Data Type   | Description                           |
|------------------------|-------------|---------------------------------------|
| `temperature-readings` | Temperature | Room temperatures in °C               |
| `co2-readings`         | CO2         | CO2 levels in ppm                     |
| `motion-readings`      | Motion      | Boolean motion detection              |
| `light-readings`       | Light       | Light levels in lux                   |
| `sound-readings`       | Sound       | Sound levels in decibels (dB)         |
| `occupancy-readings`   | Occupancy   | Number of people detected in the room |

---

### Real-Time Processing Logic

Faust continuously consumes and processes messages from the Kafka topics using six stream processing agents:

1. **Average Temperature per Room**

    * Maintains running average temperature per room.
    * Stores latest value in `latest_temp` table.

2. **High CO2 Alert**

    * Triggers alert if CO2 > 1000 ppm.

3. **Cold Room Alert**

    * Triggers alert for any room with temperature < 18°C.

4. **Low Light Alert**

    * Triggers alert if light intensity is below 50 lux.

5. **High Sound Alert**

    * Triggers alert if sound level exceeds 1.0 dB.

6. **Room Overcrowding Alert**

    * Triggers alert if occupancy exceeds 3 people.

---

### Project Structure

```
faust-streams-app/
│
├── app.py                   # Main Faust application with agents and topic definitions
├── producer.py              # Kafka producer that reads and sends CSV sensor data
├── sensor_data.csv          # Simulated sensor data for all rooms
├── requirements.txt         # Python dependencies
├── docker-compose.yml       # Kafka + Zookeeper configuration
├── start.sh                 # Automation script to launch Kafka + Faust + producer
└── sensor-stream-app-data/  # Generated by Faust to store changelog tables
```

---

###️ How to Run the Project

#### 1. Install Python dependencies

```bash
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

#### 2. Make the startup script executable

```bash
chmod +x start.sh
```

#### 3. Start Kafka, Faust, and the producer

```bash
bash start.sh
```

This script will:

* Stop any existing Kafka containers
* Delete local Faust data for a clean start
* Start Kafka and Zookeeper
* Create required Kafka topics
* Activate the Python virtual environment
* Launch the Faust worker to process the streams
* Start the producer that streams data from `sensor_data.csv`

---

### Sample Console Output

```text
Average temperature in Living Room: 21.35°C
ALERT: High CO2 level in Bedroom: 1240 ppm
ALERT: Cold room in Office - 16.80°C
Low light level in Kitchen: 42 lux
ALERT: High noise level in Living Room: 1.23 dB
Overcrowded room in Bedroom: 5 people
```

---